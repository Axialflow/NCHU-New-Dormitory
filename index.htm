<!DOCTYPE HTML>
<html style="margin: 0; height: 100%; ">
    <head>
        <title>興大二村</title>
        <style type="text/css">
            p{
                margin: 0;
            }
            bottom{
                margin: 10px;
            }
            .content_but {
                width: 25vh;
                height: 25vh;
                margin: 2vh;
                border-radius: 15px;
                background-color: rgb(255 255 255);
                text-align: center;
                display:flex;
                align-items:center;
                justify-content:center;
            }
                .content_but:hover {
                    cursor: pointer;
                }
            .need_pointer:hover {
                cursor: pointer;
            }
            
        </style>
    </head>
    <body style="margin: 0; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: space-between; background-color: rgb(255 235 124); background-image: url(bg.png); background-repeat: no-repeat; background-attachment: fixed; background-position: center; background-size: cover; ">
        <script type="text/javascript">
            var dormIntro = {
                "intro1": {
                    "rich": [[]],
                    "title": [["興大二村","白天景色","夜景","東棟","西棟","南棟"],["交通資訊"],["服務中心","警衛室","創意國際學院（？"]],
                    "content": [[]]
                },
                "intro2": {
                    "rich": [],
                    "title": [["兩人房","四人房"],["書桌","床","衣櫃"],["冷氣","洗手臺","廁所","淋浴間","陽台"]],
                    "content": []
                },
                "intro3": {
                    "rich": [["3-1-1.jpg","3-1-2.jpg","3-1-3.jpg","3-1-4.jpg"],["3-2-1.jpg","3-2-2.jpg"],["3-3-1.jpg"]],
                    "title": [["廚房 - 南棟二樓","微波爐","電鍋","電磁爐"],["自由空間(小)","自由空間(大)"],["會議室"],["茶水間","飲水機","洗衣機","烘衣機","脫水機","洗手檯","洗衣槽"],["信箱"],["冰箱"],["客廳","電視"],["閱覽室"],["垃圾場"],["腳踏車停車場","機車停車場"],["宿舍大道"],["公共廁所"],["頂樓"]],
                    "content": [["休閒時自己動手做美食的好地方！", "使用後如有食物濺出記得清理～", "使用後記得歸位喔！","記得整理～"],["小","大"],["暫未開放"]]
                },
                "intro4": {
                    "rich": [],
                    "title": [[],[]],
                    "content": []
                }
            };

            var nowIntro;
            var nowItem;
            var nowTitle;
            function openCover(obj) {
                document.getElementById('cover').style.display = "block";
                if (obj == "opition") {

                } else if (obj == "about") {

                } else {
                    var introExist = 0;
                    for(var d in dormIntro) {
                        if (obj == d) {
                            introExist = 1;
                        }
                    }
                    if (introExist) {
                        document.getElementById('items_index').innerHTML = "";
                        nowIntro = obj;
                        for (var i = 0; i < Object.keys(dormIntro[obj]["title"]).length; i++) {
                            document.getElementById('items_index').innerHTML += "<li id=\"dot" + i + "\" class=\"need_pointer\" style=\"color:rgb(0 225 225);font-size:1.5em\" onclick=\"chooseItem(" + i + ")\"></li>";
                        }
                        nowItem = 0;
                        chooseItem(nowItem);
                    }
                }
            }
            function closeCover(){
                document.getElementById('cover').style.display = "none";
            }
            function chooseTitle(num, isImage = true) {
                if (isImage) {
                    document.getElementById('intro_rich').innerHTML = "<span style=\"opacity: 1; background-position: center center; background-repeat: no-repeat; background-size: contain; background-image: url('./rich/" + dormIntro[nowIntro]["rich"][nowItem][num] + "'); width: inherit; height: inherit;\"></span>";
                } else {
                    document.getElementById('intro_rich').innerHTML = dormIntro[nowIntro]["rich"][nowItem][num];
                }
                document.getElementById('intro_title').innerHTML = dormIntro[nowIntro]["title"][nowItem][num];
                document.getElementById('intro_content').innerHTML = dormIntro[nowIntro]["content"][nowItem][num];
            }
            function chooseItem(num) {
                var nowItemlen = Object.keys(dormIntro[nowIntro]["title"]).length;
                nowItem = (num % nowItemlen + nowItemlen) % nowItemlen;
                for (var i = 0; i < nowItemlen; i++) {
                    document.getElementById('dot' + i.toString()).style.color = "rgb(0 225 225)";
                }
                document.getElementById('dot' + nowItem.toString()).style.color = "rgb(255 225 64)";
                if (dormIntro[nowIntro]["title"][nowItem].length <= 1) {
                    document.getElementById('prev_intro').style.display = 'none';
                    document.getElementById('next_intro').style.display = 'none';
                } else {
                    document.getElementById('prev_intro').style.display = 'inline';
                    document.getElementById('prev_intro').style.visibility = 'hidden';
                    document.getElementById('next_intro').style.display = 'inline';
                    document.getElementById('next_intro').style.visibility = 'visible';
                }
                nowTitle = 0;
                chooseTitle(nowTitle);
            }
            function prevIntro() {
                nowTitle--;
                if (nowTitle == 0) {
                    document.getElementById('prev_intro').style.visibility = 'hidden';
                }
                document.getElementById('next_intro').style.visibility = 'visible';
                chooseTitle(nowTitle);
            }
            function nextIntro() {
                nowTitle++;
                if (nowTitle == dormIntro[nowIntro]["title"][nowItem].length - 1) {
                    document.getElementById('next_intro').style.visibility = 'hidden';
                }
                document.getElementById('prev_intro').style.visibility = 'visible';
                chooseTitle(nowTitle);
            }

            var nowScroll = function (e) {
                var ee = e || window.event;
                var delta;
                if (ee.wheelDelta) { 
                    delta = ee.wheelDelta;
                } else if (ee.detail) { //Firefox  
                    delta = ee.detail;
                }

                if (delta < 0) {
                    chooseItem(nowItem - 1);
                } else {
                    chooseItem(nowItem + 1);
                }
            }
            if (document.addEventListener) { //Firefox 
                document.addEventListener('DOMMouseScroll', nowScroll, false);
            }  
            window.onmousewheel = document.onmousewheel = nowScroll;

            var touchPointY;
            var canChooseItem = false;
            document.getElementById('cover').addEventListener('touchstart', function (e) {
                if (e.targetTouches.length == 1) {
                    var touch = e.targetTouches[0];
                    touchPointY = touch.pageY;
                    canChooseItem = true;
                }
            }, false);
            document.getElementById('cover').addEventListener('touchmove', function (e) {
                if (e.targetTouches.length == 1) {
                    var touch = e.targetTouches[0];
                    if (canChooseItem) {
                        if (touch.pageY - touchPointY > 20) {
                            canChooseItem = false;
                            chooseItem(nowItem + 1);
                        } else if (touch.pageY - touchPointY < -20) {
                            canChooseItem = false;
                            chooseItem(nowItem - 1);
                        }
                    }
                }
            }, false);
        </script>
        
        <header style="width: 100%; background-color: darkslateblue; display: flex; align-items: center; justify-content: space-around;">
            <img src="logo.svg" height="75" style="margin: 5px;" />
            <section></section>
            <p style="position:absolute; font-size: 3em; color: white;">興大二村</p>
            <section></section>
            <p style="font-size: 3em; color: white;">≡</p>
        </header>

        <main style="width: 100%; height: contain;">
            <div style="display: flex; flex-direction: row; flex-wrap: wrap; align-items: center; justify-content: space-around; ">
                <bottom class="content_but" onclick="openCover('intro1')"><span>宿舍介紹</span></bottom>
                <bottom class="content_but" onclick="openCover('intro2')"><span>寢室配置</span></bottom>
                <bottom class="content_but" onclick="openCover('intro3')"><span>公用空間</span></bottom>
                <bottom class="content_but" onclick="openCover('intro4')"><span>宿舍規定</span></bottom>
            </div>
        </main>

        <footer style="width: 100%; background-color: black;">
            <p>版權宣告</p>
        </footer>

        <div id="cover" style="display:block; position: fixed; opacity: 0.9; background-color: rgb(32 32 32); width: 100%; height: 100%; color: rgb(192 192 192);">
            <section></section>
            <section style="display: flex; height: 100%; width: 100%; left: 0; align-items: center; justify-content: space-evenly; ">
                <ul style="padding: 2%;" id="items_index">
                    <li style="color:rgb(255 226 65)" onclick="chooseItem()"></li>
                </ul>
                <article style="width: 90%; height: 95%; display: flex; flex-direction: column; align-items: center; justify-content: space-evenly; ">
                    <p style="display: flex; align-items: center; justify-content: space-evenly; width:100%; height: 80%; font-size: 10vh;">
                        <span id="prev_intro" class="need_pointer" style="color: rgb(255 225 64); " onclick="prevIntro()"><</span>
                        <span id="intro_rich" style="width: 90%; height: 100%; display: flex;  align-items: center; justify-content: center; "><span style="background-image: url();"></span></span>
                        <span id="next_intro" class="need_pointer" style="color: rgb(255 225 64); " onclick="nextIntro()">></span>
                    </p>
                    <p style="display: flex; flex-direction:column; align-items: center; justify-content: center; ">
                        <label id="intro_title"></label>
                        <span id="intro_content"></span>
                    </p>
                </article>
            </section>
            <span id="close_cover" onclick="closeCover()" style="top:1vh; right:1vh; position:fixed; font-size: 5vh;">X</span>
        </div>
    </body>
</html>